C51 COMPILER V9.60.0.0   STR                                                               04/17/2023 17:06:38 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE STR
OBJECT MODULE PLACED IN ..\Objects\str.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE ..\Modules\str.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\System;..\Modules;..
                    -\User) DEBUG OBJECTEXTEND PRINT(..\Listings\str.lst) OBJECT(..\Objects\str.obj)

line level    source

   1          #include "str.h"
   2          
   3          void IntToStr(s8* str, s32 value)        //整型数值转换为字符串函数
   4          {
   5   1          long integer = 0;
   6   1          long compare = 1; 
   7   1          if(value < 0){
   8   2              value = -value;
   9   2              *str++ = '-';
  10   2          }
  11   1          integer = (long) value;
  12   1          do{
  13   2              compare *= 10;
  14   2          }while(compare <= integer);
  15   1          do{                                         
  16   2              compare /= 10;
  17   2              *str++ = integer / compare % 10 + '0';
  18   2          }while(compare > 1);
  19   1          *str = 0;
  20   1      }
  21          
  22          void FloatToStr(s8* str, double value, u8 precision)       //浮点型数值转换为字符串函数
  23          {
  24   1          long integer = 0;
  25   1          long compare = 1;
  26   1          long decimalPower = 1;  
  27   1          double decimal = 0;
  28   1          if(value < 0){
  29   2              value = -value;
  30   2              *str++ = '-';
  31   2          }
  32   1          integer = (long) value;
  33   1          decimal = value - integer;
  34   1          do{
  35   2              compare *= 10;
  36   2          }while(compare <= integer);
  37   1          do{
  38   2              compare /= 10;
  39   2              *str++ = integer / compare % 10 + '0';
  40   2          }while(compare > 1);
  41   1          if(precision > 0){
  42   2              *str++ = '.';
  43   2              while(precision){
  44   3                  precision--;
  45   3                  decimalPower *= 10;
  46   3                  *str++ = (long) (decimal * decimalPower) % 10 + '0';
  47   3              }
  48   2              *str = 0;
  49   2          } else *str = 0;
  50   1      }
  51          
  52          u8 GetStrLen(s8* str)
  53          {
  54   1          u8 i = 0;
C51 COMPILER V9.60.0.0   STR                                                               04/17/2023 17:06:38 PAGE 2   

  55   1          for (i = 0; str[i] != 0; i++);
  56   1          return i;
  57   1          
  58   1      }
  59          
  60          void AddStr(s8* preStr, s8* subStr)
  61          {
  62   1          u8 i = 0;
  63   1          u8 temp = GetStrLen(preStr);
  64   1          for (i = 0; subStr[i] != 0; i++) {
  65   2              preStr[temp + i] = subStr[i];
  66   2          }
  67   1          preStr[temp + i] = 0;
  68   1      }
  69          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    771    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      50
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
